{% extends "base.html" %}

{% block style %}
new.css
{% endblock %}

{% block content %}
<div class="Layout__Form">
  <div>
    <div>
      <div class="form-group">
        <label for="title">제목</label>
        <input id="post-title" type="text" placeholder="">
      </div>
      <div class="form-group">
        <label for="subtitle">내용 요약</label>
        <textarea id="post-subtitle" type="text" rows="2"></textarea>
      </div>
      <div class="form-group">
        <label for="content">본문</label>
        <textarea id="post-content" type="text" rows="10"></textarea>
      </div>
      <button type="button" class="post-button" onclick="postArticle()" value="execute">게시하기</button>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function postArticle() {
  const title = $('#post-title').val()
  const subtitle = $('#post-subtitle').val()
  const content = $('#post-content').val()
  const post_data = { title, subtitle, content }

  $.ajax({
    type: 'POST',
    url: '{{ url_for("get_articles") }}',
    data: JSON.stringify(post_data),
    dataType: 'JSON',
    contentType: 'application/json',
    success: function (response) {
      $('#post-title').val('')
      $('#post-subtitle').val('')
      $('#post-content').val()

      location.href = '{{ url_for("index") }}'
    }
  })
}
</script>
{% endblock %}
